window.SubscribeWidget=window.SubscribeWidget||{},function(n){function t(n){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(n)}function i(n){var r=$(n.emailId).val(),i;if(t(r)){var f=$(n.triggerSubscriptionClass),e=$(f).attr("sf-data-subscribe-recaptcha"),o=$("#"+e),u=$(o).attr("sf-data-recaptcha-id");onRecaptchaExecutedCallback=function(t){var i=new FormData;i.append("email",r);i.append("type",n.subscriptionType);i.append("pageId",n.pageId);i.append("absolutePageUrl",n.absolutePageUrl);i.append("culture",n.culture);i.append("g-recaptcha-response",t);var f=window.sf_appPath||"/",e=f+"subscription/subscribe",u=new XMLHttpRequest;u.open("POST",e);u.onload=function(){var f,t,i,e,r;u.status===200?(f=JSON.parse(u.response),$(n.emailId).val(""),$(n.errorClass).empty(),t=document.createElement("span"),t.innerHTML=f,i=$(n.confirmationModalId+" .portal-modal-inner :first-child"),i.empty(),i.append(t),$(n.modalId).hide(),$(n.confirmationModalId).show()):(e=JSON.parse(u.response),r=document.createElement("span"),r.innerHTML=e,$(n.errorClass).empty(),$(n.errorClass).append(r))};u.send(i)};n.recaptchaEnabled?(grecaptcha.reset(u),grecaptcha.execute(u)):onRecaptchaExecutedCallback("")}else i=document.createElement("span"),i.innerHTML=n.invalidEmailError,$(n.errorClass).empty(),$(n.errorClass).append(i)}n.init=function(t){$(t.triggerSubscriptionClass).click(function(){i(t)});$(t.subscribeButtonClass).click(function(){$(t.modalId).show()});$(t.emailId).keypress(function(n){n.which===13&&n.preventDefault()});window.addEventListener("mousedown",function(i){i.target===$(t.modalId)[0]&&n.hideModal(t.modalId,t.emailId,t.errorClass);i.target===$(t.confirmationModalId)[0]&&n.hideModal(t.confirmationModalId,t.emailId,t.errorClass)})};n.hideModal=function(n,t,i){$(n).hide();$(t).val("");$(i).empty()}}(SubscribeWidget);