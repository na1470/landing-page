window.FeedbackWidget=window.FeedbackWidget||{},function(n){function i(n){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(n)}function t(n){return!n||/^\s*$/.test(n)}function r(r){n.clearErrors(r);var u=$(r.emailId).val(),f=$(r.fullnameId).val(),e=$(r.commentId).val();if(t(f)||t(e)||t(u)){n.appendMessage(r.requiredFieldsError,r.errorId);return}if(!i(u)){n.appendMessage(r.invalidEmailError,r.emailErrorId);return}var s=$(r.submitButtonId),h=$(s).attr("sf-data-feedback-recaptcha"),c=$("#"+h),o=$(c).attr("sf-data-recaptcha-id");onRecaptchaExecutedCallback=function(t){var i=new FormData;i.append("senderEmail",u);i.append("reciverEmail",r.reciverEmail);i.append("subjectEmail",r.subjectEmail);i.append("fullName",f);i.append("comments",e);i.append("culture",r.culture);i.append("feedbackMessage",r.feedbackMessage);i.append("g-recaptcha-response",t);var s=window.sf_appPath||"/",h=s+"feedback/post",o=new XMLHttpRequest;o.open("POST",h);o.onload=function(){var t,i;o.status===200?(t=JSON.parse(o.response),n.clearModal(r),n.appendMessage(t,r.confirmationId),n.redirection(r.redirectionEnabled,r.redirectUrl)):(i=JSON.parse(o.response),n.appendMessage(i,r.errorId))};o.send(i)};r.recaptchaEnabled?(grecaptcha.reset(o),grecaptcha.execute(o)):onRecaptchaExecutedCallback("")}n.init=function(t){$(t.modalLinkId).click(function(){$(t.modalId).show()});$(t.submitButtonId).click(function(){r(t)});$(t.modalId+".close").click(function(){n.hideModal(t.modalId);n.clearModal(t);n.redirection(t.redirectionEnabled,t.redirectUrl)});window.addEventListener("mousedown",function(i){i.target===$(t.modalId)[0]&&(n.hideModal(t.modalId),n.clearModal(t),n.redirection(t.redirectionEnabled,t.redirectUrl))})};n.hideModal=function(n){$(n).hide()};n.clearModal=function(n){$(n.emailId).val("");$(n.fullnameId).val("");$(n.commentId).val("");$(n.errorId).empty();$(n.emailErrorId).empty();$(n.confirmationId).empty()};n.clearErrors=function(n){$(n.errorId).empty();$(n.emailErrorId).empty();$(n.confirmationId).empty()};n.appendMessage=function(n,t){var i=document.createElement("span");i.innerHTML=n;$(t).empty();$(t).append(i)};n.redirection=function(n,t){t.match(/^[a-zA-Z]+:\/\//)||(t="http://"+t);n==="True"&&(window.location.href=t)}}(FeedbackWidget);